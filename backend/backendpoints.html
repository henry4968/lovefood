<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOVEFOOD管理中心</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <link rel="stylesheet" href="../css/backstage/backstageAll.css">
    <script src="../node_modules/moment/min/moment.min.js"></script>
    <script src="../node_modules/bootstrap-datetimepicker-sass/src/js/bootstrap-datetimepicker.js"></script>
    <script src="../js/23/product/datetime.js"></script>
    <script>
        $(function () {
            $(".pointsDataFilterTab").click(function () {
                $(".pointsDataFilterTab").removeClass("tabActive");
                $(this).addClass("tabActive");
            });

            $("#pointsDataFilterTab01").click(function () {
                $("#pointsResultData, #pointsLogData, #pointsDataFilter").css("display", "block");
                $("#pointsDataUploader").css("display", "none");

            });

            $("#pointsDataFilterTab02").click(function () {
                $("#pointsResultData, #pointsLogData, #pointsDataFilter").css("display", "none");
                $("#pointsDataUploader").css("display", "block");

            });
        });
    </script>
</head>

<body>
    <div class="containerPoints">
        <div class="navWrapper">
            <nav>
                <div class="navLeft">
                    <img src="../img/23/loveFood_logo1.png" alt="">
                    <h1>管理中心</h1>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="35.965" viewBox="0 0 36 35.965">
                    <path id="放大鏡"
                        d="M35.332,35.3a2.25,2.25,0,0,1-3.2,0l-6.96-6.961A15.7,15.7,0,0,1,9.633,30.217,15.521,15.521,0,0,1,1.248,21.85a15.659,15.659,0,0,1,0-12.252,15.684,15.684,0,0,1,3.357-5.01,15.885,15.885,0,0,1,5.027-3.34,15.618,15.618,0,0,1,12.235,0,16.036,16.036,0,0,1,5.027,3.34A15.588,15.588,0,0,1,30.252,9.6,15.388,15.388,0,0,1,31.5,15.715a15.339,15.339,0,0,1-3.129,9.422L35.332,32.1a2.25,2.25,0,0,1,0,3.2ZM15.75,4.5A11.214,11.214,0,0,0,4.5,15.733,11.2,11.2,0,0,0,15.75,26.965,11.214,11.214,0,0,0,27,15.732,11.195,11.195,0,0,0,15.75,4.5Z"
                        transform="translate(0 0)" fill="#887664" />
                </svg>
            </nav>
        </div>
        <div class="asideMainWrapper">
            <aside>
                <div>
                    <ul class="member">
                        <li>管理員</li>
                        <li>Name</li>
                    </ul>

                    <ul class="sideNav">
                        <a class="a-sideLink" href="backendIndex.html">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="30.422" height="30.422"
                                    viewBox="0 0 30.422 30.422">
                                    <path id="Path_34" data-name="Path 34"
                                        d="M26.59,26.959C25.233,24.807,22.248,22.5,16.143,22.5S7.056,24.8,5.7,26.96a13.5,13.5,0,0,0,20.893,0Z"
                                        transform="translate(-0.932 -3.369)" fill="#897666" />
                                    <path id="Path_35" data-name="Path 35"
                                        d="M16.9,18.04A5.645,5.645,0,1,0,11.25,12.4,5.645,5.645,0,0,0,16.9,18.04Z"
                                        transform="translate(-1.684 -1.011)" fill="#897666" fill-rule="evenodd" />
                                    <path id="Path_36" data-name="Path 36"
                                        d="M15.211,1.9a13.31,13.31,0,1,0,13.31,13.31A13.31,13.31,0,0,0,15.211,1.9ZM0,15.211A15.211,15.211,0,1,1,15.211,30.422,15.211,15.211,0,0,1,0,15.211Z"
                                        fill="#897666" fill-rule="evenodd" />
                                </svg>
                                <li>會員管理</li>
                            </div>
                        </a>
                        <a class="a-sideLink" href="backendOrder.html">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="22.857" height="32"
                                    viewBox="0 0 22.857 32">
                                    <path id="Path_37" data-name="Path 37"
                                        d="M29.264,10.593l-8-8a1.04,1.04,0,0,0-.8-.343H9.036A2.286,2.286,0,0,0,6.75,4.536V31.964A2.286,2.286,0,0,0,9.036,34.25H27.321a2.286,2.286,0,0,0,2.286-2.286V11.393a1.04,1.04,0,0,0-.342-.8Zm-8.8-5.6,6.4,6.4h-6.4Zm6.857,26.971H9.036V4.536h9.143v6.857a2.286,2.286,0,0,0,2.286,2.286h6.857Z"
                                        transform="translate(-6.75 -2.25)" fill="#887664" />
                                    <path id="Path_38" data-name="Path 38"
                                        d="M16.469,23.47l-3.38-2.331L11.25,22.408l5.219,3.6,10.438-7.2-1.839-1.269Z"
                                        transform="translate(-7.65 -0.337)" fill="#887664" />
                                </svg>
                                <li>訂單管理</li>
                            </div>
                        </a>
                        <a class="a-sideLink" href="backendProduct.html">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="30.422" height="30.422"
                                    viewBox="0 0 30.422 30.422">
                                    <path id="bag"
                                        d="M30.5,10.942H26.153v-.305A8.361,8.361,0,0,0,17.766,2.25h-.544a8.419,8.419,0,0,0-8.453,8.387v.305H4.423L2.25,32.672H32.672Zm-19.557-.305a6.257,6.257,0,0,1,6.281-6.214h.544a6.2,6.2,0,0,1,6.214,6.214v.305H10.942ZM4.681,30.5,6.372,13.115h2.4V15.58a2.173,2.173,0,1,0,2.173,0V13.115H23.98V15.58a2.173,2.173,0,1,0,2.173,0V13.115h2.4L30.248,30.5Z"
                                        transform="translate(-2.25 -2.25)" fill="#887664" />
                                </svg>
                                <li>商品管理</li>
                            </div>
                        </a>
                        <a class="a-sideLink" href="backendpoints.html">
                            <div class="currentPage">
                                <svg xmlns="http://www.w3.org/2000/svg" width="28.422" height="24.869"
                                    viewBox="0 0 28.422 24.869">
                                    <path id="diamond"
                                        d="M24.869,0l3.553,7.105H21.316ZM15.987,0h7.105L19.54,7.105ZM10.658,7.105,14.211,0l3.553,7.105ZM5.329,0h7.105L8.882,7.105ZM0,7.105,3.553,0,7.105,7.105ZM12.435,24.869,0,8.882H7.105ZM19.54,8.882,14.211,24.869,8.882,8.882Zm8.882,0L15.987,24.869,21.316,8.882Z"
                                        fill="#887664" />
                                </svg>
                                <li>點數管理</li>
                            </div>
                        </a>
                        <a class="a-sideLink" href="backendFinance.html">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="28.422" height="28.422"
                                    viewBox="0 0 28.422 28.422">
                                    <path id="Icon_open-folder" data-name="Icon open-folder"
                                        d="M0,0V7.105H28.422V3.553H10.658V0ZM0,10.658V26.646a1.759,1.759,0,0,0,1.776,1.776H26.646a1.759,1.759,0,0,0,1.776-1.776V10.658Z"
                                        fill="#887664" />
                                </svg>
                                <li>財務管理</li>
                            </div>
                        </a>
                        <button class="btn-s btn-brown">登出</button>
                    </ul>
                </div>
            </aside>
            <main>
                <div id="pointsDataControlArea">
                    <div id="pointsDataFilterTabsBlock">
                        <a href="#SingleEdit">
                            <div id="pointsDataFilterTab01" class="pointsDataFilterTab tabActive">單筆編輯</div>
                        </a>
                        <a href="#BatchUpload">
                            <div id="pointsDataFilterTab02" class="pointsDataFilterTab">批次上傳</div>
                        </a>
                    </div>
                    <div id="pointsDataFilter">
                        <div id="pointsDataFilterLeftUpperBlock">
                            <div id="pointsDataFilterLeftUpperBlockRow01" class="pointsDataFilterLeftUpperBlockRow">
                                <div>會員編號</div>
                                <input type="text" name="id" class="form-control">
                                <div>會員帳號</div>
                                <input type="text" name="account" class="form-control">
                            </div>
                            <div id="pointsDataFilterLeftUpperBlockRow02" class="pointsDataFilterLeftUpperBlockRow">
                                <div>會員姓名</div>
                                <input type="text" name="name" class="form-control">
                                <div>會員手機</div>
                                <input type=" text" name="phone" class="form-control">
                            </div>
                        </div>
                        <div id="pointsDataFilterRightBlock">
                            <div class="form-group">
                                查詢區間
                                <label class="sr-only">Time Pick</label>
                                <div class="input-group DateDemo" id="">
                                    <input type="text" name="dateStart" data-format="MM/DD/YYYY" value="2020-01-01"
                                        class="form-control" id="queryDateStart" />至
                                    <span class="input-group-btn">
                                        <button class="btn btn-brown" type="button"><i
                                                class="glyphicon glyphicon-calendar fa-4x"></i></button>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="sr-only">Time Pick</label>
                                <div class="input-group DateDemo">
                                    <input type="text" name="dateEnd" data-format="MM/DD/YYYY" value="2020-12-31"
                                        class="form-control" id="queryDateEnd" />
                                    <span class="input-l input-group-btn">
                                        <button class="btn btn-brown" type="button"><i
                                                class="glyphicon glyphicon-calendar fa-4x"></i></button>
                                    </span>
                                </div>
                            </div>
                            <div id="membersPointsActionBlock">
                                <a href="#0" @click="query">
                                    <div id="pointsDataFilterButton01" class="pointsDataFilterButton">查詢</div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div id="pointsDataUploader">
                        <h4>請上傳規範內容的csv檔，以執行批次發放點數</h4>
                        <form action="../PHP/backStage/points/pointsImport.php" method="POST">
                            <input type="file" name="importCSV" enctype="multipart/form-data">
                            <button type="submit">確認上傳</button>
                        </form>
                    </div>
                </div>
                <div id="pointsResultData" class="pointsDataArea" v-if="!isShow">
                    <table>
                        <tr id="pointsDataHeader">
                            <th>序號</th>
                            <th>會員編號</th>
                            <th>會員帳號</th>
                            <th>會員姓名</th>
                            <th>會員手機</th>
                            <th>擁有點數</th>
                            <th>功能鍵</th>
                        </tr>
                        <tbody v-if="pointsOfMember" v-for="(data,key) in pointsOfMember">
                            <h4>查詢區間：【<span id="showDateStart">2020-01-01</span>】至【<span
                                    id="showDateEnd">2020-12-31</span>】
                            </h4><br>
                            <tr>
                                <td>{{key+1}}</td>
                                <td>{{data["MEMBER_ID"]}}</td>
                                <td>{{data["ACCOUNT"]}}</td>
                                <td>{{data["NAME"]}}</td>
                                <td>{{data["PHONE"]}}</td>
                                <td v-if='data["TOTAL_ISSANCE"] - data["TOTAL_DISCOUNT"]'>
                                    {{data["TOTAL_ISSANCE"] - data["TOTAL_DISCOUNT"]}}
                                </td>
                                <td v-else-if='data["TOTAL_ISSANCE"] && !data["TOTAL_DISCOUNT"]'>
                                    {{data["TOTAL_ISSANCE"] - 0}}
                                </td>
                                <td v-else-if='!data["TOTAL_ISSANCE"] && data["TOTAL_DISCOUNT"]'>
                                    {{0 - data["TOTAL_DISCOUNT"]}}
                                </td>
                                <td v-else>
                                    0
                                </td>
                                <td>
                                    <button type="submit" class="btn-sb btn-green" @click="showContent"
                                        :data-id="data['MEMBER_ID']" :data-id="data['NAME']">詳情</button>
                                </td>
                            </tr>
                        </tbody>
                        <tbody v-else="pointsOfMember">
                            <tr v-for="(data,key) in pointsOfMember">
                                <td>{{key+1}}</td>
                                <td>{{data["MEMBER_ID"]}}</td>
                                <td>{{data["ACCOUNT"]}}</td>
                                <td>{{data["NAME"]}}</td>
                                <td>{{data["PHONE"]}}</td>
                                <td>{{data["POINTS"]}}</td>
                                <td>
                                    <button type="submit" class="btn-sb btn-green" @click="showContent"
                                        :data-id="data['MEMBER_ID']" :data-name="data['NAME']">詳情</button>

                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div id="pagination">
                        <a href="#0">＜</a>
                        <a href="#0">1</a>
                        <a href="#0">2</a>
                        <a href="#0">3</a>
                        <a href="#0">4</a>
                        <a href="#0">5</a>
                        <a href="#0">＞</a>
                        <a href="#0">最末頁</a>
                    </div>
                </div>
                <div id="pointsLogData" class="pointsDataArea" v-if="isShow">
                    <button @click="backToPreviousPage">
                        回上頁
                    </button>
                    <div id="memberProfile" v-for="(data,key) in pointsOfMember">
                        會員編號：<input class="input-xl" type="text" :value="data['MEMBER_ID']" name="selectedId"
                            disabled><br>
                        會員帳號：<input class="input-xl" type="text" :value="data['ACCOUNT']" disabled><br>
                        會員姓名：<input class="input-xl" type="text" :value="data['NAME']" disabled><br>
                        會員手機：<input class="input-xl" type="text" :value="data['PHONE']" disabled><br>
                        擁有點數：<input class="input-xl" type="text" :value="data['POINTS']" disabled>
                    </div>
                    <div id="">
                        修改點數：<br>
                        <input type="text" name="points">
                        <button @click="update">確認修改</button>
                    </div>
                    <div>
                        使用紀錄：
                        <table>
                            <thead>
                                <tr>
                                    <th>序號</th>
                                    <th>訂單編號</th>
                                    <th>使用點數</th>
                                    <th>使用時間</th>
                                    <th>功能鍵</th>
                                </tr>
                            </thead>
                            <tbody v-if="discountLog">
                                <tr v-for="(data,key) in discountLog">
                                    <td>{{key+1}}</td>
                                    <td>{{data["ORDER_ID"]}}</td>
                                    <td>{{data["DISCOUNT"]}}</td>
                                    <td>{{data["ORDER_DATE"]}}</td>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        發放紀錄：
                        <table>
                            <thead>
                                <tr>
                                    <th>序號</th>
                                    <th>發放序號</th>
                                    <th>發放點數</th>
                                    <th>發放時間</th>
                                </tr>
                            </thead>
                            <tbody v-if="issanceLog">
                                <tr v-for="(data,key) in issanceLog">
                                    <td>{{key+1}}</td>
                                    <td>{{data["ISSANCE_DATE"]}}</td>
                                    <td>{{data["ISSANCE_NUM"]}}</td>
                                    <td>{{data["POINTS_ISSANCER_ID"]}}</td>
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="../js/22/pointsAjaxVue.js"></script>

</body>

</html>